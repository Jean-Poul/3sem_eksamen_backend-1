package nextLaunchFetcher;

import entities.NextLaunch;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;
import org.junit.jupiter.api.BeforeEach;
import utils.EMF_Creator;

public class NextLaunchFetcherTest {
    
    public NextLaunchFetcherTest() {
    }
    
    private static EntityManagerFactory emf;
    private static NextLaunchFetcher instance;
    
    public static NextLaunchFetcher getNextLaunchFetcher(EntityManagerFactory _emf) {
        if (instance == null) {
            emf = _emf;
            instance = new NextLaunchFetcher();
        }
        return instance;
    }
    
    @BeforeEach
    public void setUp() {

        EntityManagerFactory e = EMF_Creator.createEntityManagerFactoryForTest();
        EntityManager em = e.createEntityManager();
        //Fake launchstring for DB
        String APIData = "{\"count\":192,\"next\":\"https://ll.thespacedevs.com/2.0.0/launch/upcoming/?format=json&limit=10&offset=10\",\"previous\":null,\"results\":[{\"id\":\"9828537e-e017-4f77-96b6-49799d439363\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/9828537e-e017-4f77-96b6-49799d439363/?format=json\",\"launch_library_id\":1221,\"slug\":\"long-march-5-change-5\",\"name\":\"Long March 5  | Chang'e 5\",\"status\":{\"id\":3,\"name\":\"Success\"},\"net\":\"2020-11-23T20:30:21Z\",\"window_end\":\"2020-11-23T21:15:07Z\",\"window_start\":\"2020-11-23T20:30:12Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":-1,\"holdreason\":\"\",\"failreason\":\"\",\"hashtag\":null,\"launch_service_provider\":{\"id\":88,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/88/?format=json\",\"name\":\"China Aerospace Science and Technology Corporation\",\"type\":\"Government\"},\"rocket\":{\"id\":59,\"configuration\":{\"id\":128,\"launch_library_id\":116,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/128/?format=json\",\"name\":\"Long March 5\",\"family\":\"Long March 5\",\"full_name\":\"Long March 5\",\"variant\":\"\"}},\"mission\":{\"id\":385,\"launch_library_id\":488,\"name\":\"Chang'e 5\",\"description\":\"Chang'e 5 is China's robotic lunar sample return mission, which is set to bring back at least 2 kg of lunar soils and rock samples. The probe will perform a soft landing on the Moon, then rendezvous and dock with the return module in lunar orbit and fly back to Earth.\",\"launch_designator\":null,\"type\":\"Robotic Exploration\",\"orbit\":{\"id\":11,\"name\":\"Lunar Orbit\",\"abbrev\":\"LO\"}},\"pad\":{\"id\":78,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/78/?format=json\",\"agency_id\":null,\"name\":\"Wenchang\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Wenchang_Satellite_Launch_Center\",\"map_url\":\"http://maps.google.com/maps?q=19.614354,110.951057\",\"latitude\":\"19.614354\",\"longitude\":\"110.951057\",\"location\":{\"id\":8,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/8/?format=json\",\"name\":\"Wenchang Satellite Launch Center, People's Republic of China\",\"country_code\":\"CHN\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_8_20200803142445.jpg\",\"total_launch_count\":9,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_78_20200803143548.jpg\",\"total_launch_count\":9},\"webcast_live\":true,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/long2520march_image_20201119165033.png\",\"infographic\":null,\"program\":[{\"id\":18,\"url\":\"https://ll.thespacedevs.com/2.0.0/program/18/?format=json\",\"name\":\"Chinese Lunar Exploration Program\",\"description\":\"The Chinese Lunar Exploration Program also known as the Chang'e Project after the Chinese moon goddess Chang'e, is an ongoing series of robotic Moon missions by the China National Space Administration (CNSA). The program incorporates lunar orbiters, landers, rovers and sample return spacecraft, launched using Long March rockets.\",\"agencies\":[{\"id\":17,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/17/?format=json\",\"name\":\"China National Space Administration\",\"type\":\"Government\"}],\"image_url\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/program_images/chinese2520lun_program_20201122181402.jpg\",\"start_date\":\"2003-01-01T00:00:00Z\",\"end_date\":null,\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Chinese_Lunar_Exploration_Program\"}]},{\"id\":\"145b2935-8b72-44b2-8bda-4c27887721fd\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/145b2935-8b72-44b2-8bda-4c27887721fd/?format=json\",\"launch_library_id\":null,\"slug\":\"falcon-9-block-5-starlink-15\",\"name\":\"Falcon 9 Block 5 | Starlink 15\",\"status\":{\"id\":1,\"name\":\"Go\"},\"net\":\"2020-11-25T02:13:00Z\",\"window_end\":\"2020-11-25T02:13:00Z\",\"window_start\":\"2020-11-25T02:13:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":60,\"holdreason\":\"\",\"failreason\":\"\",\"hashtag\":null,\"launch_service_provider\":{\"id\":121,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/121/?format=json\",\"name\":\"SpaceX\",\"type\":\"Commercial\"},\"rocket\":{\"id\":2809,\"configuration\":{\"id\":164,\"launch_library_id\":188,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/164/?format=json\",\"name\":\"Falcon 9 Block 5\",\"family\":\"Falcon\",\"full_name\":\"Falcon 9 Block 5\",\"variant\":\"Block 5\"}},\"mission\":{\"id\":1209,\"launch_library_id\":null,\"name\":\"Starlink 15\",\"description\":\"A batch of 60 satellites for Starlink mega-constellation - SpaceX's project for space-based Internet communication system.\",\"launch_designator\":null,\"type\":\"Communications\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":80,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/80/?format=json\",\"agency_id\":121,\"name\":\"Space Launch Complex 40\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Air_Force_Station_Space_Launch_Complex_40\",\"map_url\":\"http://maps.google.com/maps?q=28.56194122,-80.57735736\",\"latitude\":\"28.56194122\",\"longitude\":\"-80.57735736\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/?format=json\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":205,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_80_20200803143323.jpg\",\"total_launch_count\":61},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/falcon2520925_image_20201116063830.png\",\"infographic\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/falcon2520925_infographic_20201120194911.png\",\"program\":[]},{\"id\":\"4a6fdee5-34db-4f9a-9f02-888a84b29d05\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/4a6fdee5-34db-4f9a-9f02-888a84b29d05/?format=json\",\"launch_library_id\":1827,\"slug\":\"soyuz-stafregat-falcon-eye-2\",\"name\":\"Soyuz STA/Fregat | Falcon Eye 2\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-29T01:33:28Z\",\"window_end\":\"2020-11-29T01:33:28Z\",\"window_start\":\"2020-11-29T01:33:28Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":-1,\"holdreason\":\"\",\"failreason\":\"\",\"hashtag\":null,\"launch_service_provider\":{\"id\":115,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/115/?format=json\",\"name\":\"Arianespace\",\"type\":\"Commercial\"},\"rocket\":{\"id\":2585,\"configuration\":{\"id\":49,\"launch_library_id\":76,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/49/?format=json\",\"name\":\"Soyuz STA\",\"family\":\"Soyuz\",\"full_name\":\"Soyuz STA/Fregat\",\"variant\":\"Fregat\"}},\"mission\":{\"id\":1093,\"launch_library_id\":1291,\"name\":\"Falcon Eye 2\",\"description\":\"Falcon Eye 2 is a high-resolution Earth-imaging satellite for the United Arab Emirates. Built by Airbus Defense and Space with an optical imaging payload from Thales Alenia Space, Falcon Eye is the second of two surveillance satellites ordered by the UAEâ€™s military.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":null},\"pad\":{\"id\":81,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/81/?format=json\",\"agency_id\":115,\"name\":\"Soyuz Launch Complex\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Ensemble_de_Lancement_Soyouz\",\"map_url\":\"https://www.google.com/maps/?q=5.3019,-52.8346\",\"latitude\":\"5.3019\",\"longitude\":\"-52.8346\",\"location\":{\"id\":13,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/13/?format=json\",\"name\":\"Kourou, French Guiana\",\"country_code\":\"GUF\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_13_20200803142412.jpg\",\"total_launch_count\":149,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_81_20200803143601.jpg\",\"total_launch_count\":22},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/soyuz2520sta_image_20191210133244.jpg\",\"infographic\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/soyuz2520sta2_infographic_20200301184443.png\",\"program\":[]},{\"id\":\"3f8dd709-4231-49ca-aa9f-694a2c0c107f\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/3f8dd709-4231-49ca-aa9f-694a2c0c107f/?format=json\",\"launch_library_id\":2105,\"slug\":\"h-iia-jdrs-1\",\"name\":\"H-IIA | JDRS-1\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-29T07:15:00Z\",\"window_end\":\"2020-11-29T09:15:00Z\",\"window_start\":\"2020-11-29T07:15:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":-1,\"holdreason\":\"\",\"failreason\":\"\",\"hashtag\":null,\"launch_service_provider\":{\"id\":98,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/98/?format=json\",\"name\":\"Mitsubishi Heavy Industries\",\"type\":\"Commercial\"},\"rocket\":{\"id\":2797,\"configuration\":{\"id\":9,\"launch_library_id\":23,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/9/?format=json\",\"name\":\"H-IIA\",\"family\":\"H-II\",\"full_name\":\"H-IIA\",\"variant\":\"A\"}},\"mission\":null,\"pad\":{\"id\":41,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/41/?format=json\",\"agency_id\":37,\"name\":\"Yoshinobu Launch Complex\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Yoshinobu_Launch_Complex\",\"map_url\":\"https://www.google.com/maps/place/30Â°24'08.0\\\"N+130Â°58'30.0\\\"E/\",\"latitude\":\"30.402222\",\"longitude\":\"130.975\",\"location\":{\"id\":26,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/26/?format=json\",\"name\":\"Tanegashima, Japan\",\"country_code\":\"JPN\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_26_20200803142507.jpg\",\"total_launch_count\":34,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_41_20200803143551.jpg\",\"total_launch_count\":13},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/h-ii_image_20190224012325.jpeg\",\"infographic\":null,\"program\":[]},{\"id\":\"30412a48-cb4d-43d6-a304-6ae5f062504f\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/30412a48-cb4d-43d6-a304-6ae5f062504f/?format=json\",\"launch_library_id\":2098,\"slug\":\"kuaizhou-1a-jilin-1-02d\",\"name\":\"Kuaizhou-1A | Jilin-1-02D\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-30T00:00:00Z\",\"window_end\":\"2020-11-30T00:00:00Z\",\"window_start\":\"2020-11-30T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":184,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/184/?format=json\",\"name\":\"China Aerospace Science and Industry Corporation\",\"type\":\"Government\"},\"rocket\":{\"id\":2758,\"configuration\":{\"id\":135,\"launch_library_id\":155,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/135/?format=json\",\"name\":\"Kuaizhou\",\"family\":\"Kuaizhou\",\"full_name\":\"Kuaizhou-1A\",\"variant\":\"1A\"}},\"mission\":{\"id\":1156,\"launch_library_id\":1346,\"name\":\"Jilin-1-02D\",\"description\":\"Jilin-1 is a series of Chinese commercial remote sensing satellites.\",\"launch_designator\":null,\"type\":\"Earth Science\",\"orbit\":null},\"pad\":{\"id\":71,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/71/?format=json\",\"agency_id\":null,\"name\":\"Unknown Pad\",\"info_url\":null,\"wiki_url\":\"\",\"map_url\":\"\",\"latitude\":\"40.958\",\"longitude\":\"100.291\",\"location\":{\"id\":17,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/17/?format=json\",\"name\":\"Jiuquan, People's Republic of China\",\"country_code\":\"CHN\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_17_20200803142429.jpg\",\"total_launch_count\":96,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_71_20200803143610.jpg\",\"total_launch_count\":25},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/kuaizhou_image_20191027094423.jpeg\",\"infographic\":null,\"program\":[]},{\"id\":\"6cdf9823-7574-4c0d-a3b2-956c7b364756\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/6cdf9823-7574-4c0d-a3b2-956c7b364756/?format=json\",\"launch_library_id\":1973,\"slug\":\"delta-iv-heavy-nrol-44\",\"name\":\"Delta IV Heavy | NROL-44\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-30T00:00:00Z\",\"window_end\":\"2020-11-30T00:00:00Z\",\"window_start\":\"2020-11-30T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":\"#NROL44\",\"launch_service_provider\":{\"id\":124,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/124/?format=json\",\"name\":\"United Launch Alliance\",\"type\":\"Commercial\"},\"rocket\":{\"id\":2531,\"configuration\":{\"id\":21,\"launch_library_id\":21,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/21/?format=json\",\"name\":\"Delta IV Heavy\",\"family\":\"Delta\",\"full_name\":\"Delta IV Heavy\",\"variant\":\"Heavy\"}},\"mission\":{\"id\":1150,\"launch_library_id\":1340,\"name\":\"NROL-44\",\"description\":\"Classified payload for NRO.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":38,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/38/?format=json\",\"agency_id\":null,\"name\":\"Space Launch Complex 37B\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Air_Force_Station_Space_Launch_Complex_37\",\"map_url\":\"http://maps.google.com/maps?q=28.531700,-80.564950\",\"latitude\":\"28.5317\",\"longitude\":\"-80.56495\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/?format=json\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":205,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_38_20200803143515.jpg\",\"total_launch_count\":26},\"webcast_live\":true,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/delta2520iv25_image_20200828105447.jpeg\",\"infographic\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/delta2520iv25_infographic_20200828105447.png\",\"program\":[]},{\"id\":\"708c2b85-50d6-4baa-bd3e-fdfb0257ea50\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/708c2b85-50d6-4baa-bd3e-fdfb0257ea50/?format=json\",\"launch_library_id\":2099,\"slug\":\"kuaizhou-1a-jilin-1-02f\",\"name\":\"Kuaizhou-1A | Jilin-1-02F\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-30T00:00:00Z\",\"window_end\":\"2020-11-30T00:00:00Z\",\"window_start\":\"2020-11-30T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":184,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/184/?format=json\",\"name\":\"China Aerospace Science and Industry Corporation\",\"type\":\"Government\"},\"rocket\":{\"id\":2759,\"configuration\":{\"id\":135,\"launch_library_id\":155,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/135/?format=json\",\"name\":\"Kuaizhou\",\"family\":\"Kuaizhou\",\"full_name\":\"Kuaizhou-1A\",\"variant\":\"1A\"}},\"mission\":{\"id\":1157,\"launch_library_id\":1347,\"name\":\"Jilin-1-02F\",\"description\":\"Jilin-1 is a series of Chinese commercial remote sensing satellites.\",\"launch_designator\":null,\"type\":\"Earth Science\",\"orbit\":null},\"pad\":{\"id\":71,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/71/?format=json\",\"agency_id\":null,\"name\":\"Unknown Pad\",\"info_url\":null,\"wiki_url\":\"\",\"map_url\":\"\",\"latitude\":\"40.958\",\"longitude\":\"100.291\",\"location\":{\"id\":17,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/17/?format=json\",\"name\":\"Jiuquan, People's Republic of China\",\"country_code\":\"CHN\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_17_20200803142429.jpg\",\"total_launch_count\":96,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_71_20200803143610.jpg\",\"total_launch_count\":25},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/kuaizhou_image_20191027094423.jpeg\",\"infographic\":null,\"program\":[]},{\"id\":\"c179a24e-416b-4077-af8a-4670dfdb880a\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/c179a24e-416b-4077-af8a-4670dfdb880a/?format=json\",\"launch_library_id\":1595,\"slug\":\"soyuz-21a-bars-m-no-3\",\"name\":\"Soyuz 2.1a | Bars-M No. 3\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-11-30T00:00:00Z\",\"window_end\":\"2020-11-30T00:00:00Z\",\"window_start\":\"2020-11-30T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":193,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/193/?format=json\",\"name\":\"Russian Space Forces\",\"type\":\"Government\"},\"rocket\":{\"id\":78,\"configuration\":{\"id\":24,\"launch_library_id\":49,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/24/?format=json\",\"name\":\"Soyuz 2.1A\",\"family\":\"Soyuz\",\"full_name\":\"Soyuz 2.1A\",\"variant\":\"2.1A\"}},\"mission\":{\"id\":836,\"launch_library_id\":842,\"name\":\"Bars-M No. 3\",\"description\":\"Bars-M is the second incarnation of the Bars project, which was started in the mid 1990ies to develop a successor for the Komtea class of area surveillance satellites. The original Bars project was halted in the early 2000s. In 2007, TsSKB-Progress was contracted for Bars-M, for which reportedly the Yantar-based service module was replaced by a new developed advanced service module.\\n\\nThe Bars-M satellites feature an electro-optical camera system called Karat, which is developed and built by the Leningrad Optical Mechanical Association (LOMO), and a dual laser altimeter instrument to deliver topographic imagery, stereo images, altimeter data and high-resolution images with a ground resolution around 1 meter.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":17,\"name\":\"Sun-Synchronous Orbit\",\"abbrev\":\"SSO\"}},\"pad\":{\"id\":85,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/85/?format=json\",\"agency_id\":163,\"name\":\"43/4 (43R)\",\"info_url\":null,\"wiki_url\":\"\",\"map_url\":\"http://maps.google.com/maps?q=62.929+N,+40.457+E\",\"latitude\":\"62.92883\",\"longitude\":\"40.457098\",\"location\":{\"id\":6,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/6/?format=json\",\"name\":\"Plesetsk Cosmodrome, Russian Federation\",\"country_code\":\"RUS\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_6_20200803142434.jpg\",\"total_launch_count\":69,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_85_20200803143554.jpg\",\"total_launch_count\":37},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/soyuz_2.1a_image_20201013143850.jpg\",\"infographic\":null,\"program\":[]},{\"id\":\"20d9789c-dfdf-46b5-a964-de5f031615a5\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/20d9789c-dfdf-46b5-a964-de5f031615a5/?format=json\",\"launch_library_id\":2080,\"slug\":\"launcherone-launch-demo-2\",\"name\":\"LauncherOne | Launch Demo 2\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-12-01T00:00:00Z\",\"window_end\":\"2020-12-01T00:00:00Z\",\"window_start\":\"2020-12-01T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":199,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/199/?format=json\",\"name\":\"Virgin Orbit\",\"type\":\"Commercial\"},\"rocket\":{\"id\":2736,\"configuration\":{\"id\":141,\"launch_library_id\":173,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/141/?format=json\",\"name\":\"LauncherOne\",\"family\":\"Launcher\",\"full_name\":\"LauncherOne\",\"variant\":\"One\"}},\"mission\":null,\"pad\":{\"id\":53,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/53/?format=json\",\"agency_id\":null,\"name\":\"Mojave Air and Space Port\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Mojave_Air_and_Space_Port\",\"map_url\":\"https://www.google.com/maps/place/35Â°03'34.0\\\"N+118Â°09'06.0\\\"W/\",\"latitude\":\"35.059444\",\"longitude\":\"-118.151667\",\"location\":{\"id\":20,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/20/?format=json\",\"name\":\"Air launch to orbit\",\"country_code\":\"UNK\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_20_20200803142433.jpg\",\"total_launch_count\":44,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_53_20200803143612.jpg\",\"total_launch_count\":1},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/launcherone_image_20200101110016.jpeg\",\"infographic\":null,\"program\":[]},{\"id\":\"5336dd45-9773-463b-acda-2a633b725d94\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/5336dd45-9773-463b-acda-2a633b725d94/?format=json\",\"launch_library_id\":1611,\"slug\":\"sslv-demo-1\",\"name\":\"SSLV  | Demo 1\",\"status\":{\"id\":2,\"name\":\"TBD\"},\"net\":\"2020-12-01T00:00:00Z\",\"window_end\":\"2020-12-01T00:00:00Z\",\"window_start\":\"2020-12-01T00:00:00Z\",\"inhold\":false,\"tbdtime\":true,\"tbddate\":true,\"probability\":-1,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":31,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/31/?format=json\",\"name\":\"Indian Space Research Organization\",\"type\":\"Government\"},\"rocket\":{\"id\":104,\"configuration\":{\"id\":150,\"launch_library_id\":189,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/150/?format=json\",\"name\":\"SSLV\",\"family\":\"\",\"full_name\":\"SSLV\",\"variant\":\"\"}},\"mission\":{\"id\":683,\"launch_library_id\":855,\"name\":\"SSLV Demo 1\",\"description\":\"First test flight of Indian SSLV (Small Satellite Launch Vehicle).\",\"launch_designator\":null,\"type\":\"Test Flight\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":50,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/50/?format=json\",\"agency_id\":31,\"name\":\"Satish Dhawan Space Centre First Launch Pad\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Satish_Dhawan_Space_Centre_First_Launch_Pad\",\"map_url\":\"https://www.google.com/maps?q=13.733,80.235\",\"latitude\":\"13.733\",\"longitude\":\"80.235\",\"location\":{\"id\":14,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/14/?format=json\",\"name\":\"Sriharikota, Republic of India\",\"country_code\":\"IND\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_14_20200803142403.jpg\",\"total_launch_count\":52,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_50_20200803143457.jpg\",\"total_launch_count\":37},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/sslv_image_20190830213312.jpg\",\"infographic\":null,\"program\":[]}]}";
        NextLaunch n1 = new NextLaunch(APIData);
        try {
            em.getTransaction().begin();
            em.createNamedQuery("NextLaunch.deleteAllRows").executeUpdate();
            em.persist(n1);
            em.getTransaction().commit();
        } finally {
            em.close();
        }
    }        

    @Test
    public void testGetNextLaunchJson() throws Exception {
            instance = getNextLaunchFetcher(emf);
            String dataString = instance.getNextLaunchJson();
            assertTrue(dataString.length() > 100);
    }
}
